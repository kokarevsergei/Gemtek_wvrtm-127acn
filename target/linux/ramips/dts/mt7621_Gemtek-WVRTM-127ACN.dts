// SPDX-License-Identifier: GPL-2.0-or-later OR MIT

#include "mt7621.dtsi"

#include <dt-bindings/input/input.h>
#include <dt-bindings/interrupt-controller/irq.h>

/ {
    compatible = "gemtek,wvrtm-127acn", "mediatek,mt7621-soc";
    model = "gemtek_wvrtm-127acn";

    chosen {
        bootargs = "console=ttyS0,115200n8";
    };

    memory@0 {
        device_type = "memory";
        reg = <0x0 0x8000000>;
    };
};

&nand {
    status = "okay";

   partitions {
        compatible = "fixed-partitions";
        #address-cells = <1>;
        #size-cells = <1>;

        partition@0 {
            label = "Bootloader";
            reg = <0x0 0x100000>;
            read-only;
        };

        partition@100000 {
            label = "Bootloader2";
            reg = <0x100000 0x100000>;
            read-only;
        };

Config: partition@200000 {
            label = "Config";
            reg = <0x200000 0x100000>;
            read-only;
        };

        partition@300000 {
            label = "Env1";
            reg = <0x300000 0x280000>;
        };

        partition@580000 {
            label = "Env2";
            reg = <0x580000 0x280000>;
        };

        partition@800000 {
            label = "Kernel";
            reg = <0x800000 0x2000000>;
        };

        partition@2800000 {
            label = "Kernel2";
            reg = <0x2800000 0x2000000>;
        };

        partition@4800000 {
            label = "Storage1";
            reg = <0x4800000 0x1c00000>;
        };

        partition@6400000 {
            label = "Storage2";
            reg = <0x6400000 0x1b80000>;
        };
    };
};


&switch0 {
    ports {
	port@1 {
	    status = "okay";
	    label = "lan2";
	};

	port@2 {
	    status = "okay";
	    label = "lan1";
	};

	port@4 {
	    status = "okay";
	    label = "wan";
        mtd-mac-address = <&Config 0xe006>;
	   };

    };
};

&state_default {
    gpio {
	groups = "i2c", "jtag";
	function = "gpio";
    };
};

&gmac0 {
	mtd-mac-address = <&Config 0x1e000>;
};

&pcie {
    status = "okay";
};

&pcie0 {
	wifi0: mt76@0,0 {
        compatible = "mediatek,mt76";
		reg = <0x0000 0 0 0 0>;
		mediatek,mtd-eeprom = <&Config 0x18004>;
		ieee80211-freq-limit = <5000000 6000000>;
	};
};

&pcie1 {
	wifi1: mt76@0,0 {
        compatible = "mediatek,mt76";
		reg = <0x0000 0 0 0 0>;
		mediatek,mtd-eeprom = <&Config 0x10004>;
		ieee80211-freq-limit = <2400000 2500000>;
	};
};

&sdhci {
	status = "okay";
};
